(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-612ab04b"],{"193f":function(e,t,a){},"4f30":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-main"},[a("el-form",{ref:"formRef",attrs:{"label-width":e.labelWidth,rules:e.formRules,model:e.formModel}},[a("el-form-item",{attrs:{label:"请假事由",prop:"name"}},[a("el-input",{attrs:{disabled:e.disabled,placeholder:"请输入请假事由"},model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),e.disabled?e._e():a("el-form-item",[a("div",{staticClass:"center"},[a("el-button",{attrs:{type:"primary",loading:e.loading,disabled:e.disabled},on:{click:e.handleSubmit}},[e._v("保存")]),a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{disabled:e.disabled},on:{click:e.close}},[e._v("取消")])],1)]),e.task?a("a-form-item",[a("div",{staticClass:"center"},[a("el-button",{attrs:{type:"primary"},on:{click:e.passTask}},[e._v("通过")]),a("el-button",{staticStyle:{"margin-left":"8px"},on:{click:e.backTask}},[e._v("驳回")])],1)]):e._e()],1)],1)},i=[],l=(a("b0c0"),a("a15b"),a("b64b"),a("b775")),o={name:"LeaveForm",props:{disabled:{type:Boolean,default:!1},processData:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1},task:{type:Boolean,default:!1},labelWidth:{type:String,default:"80px"}},data:function(){return{url:{getForm:"/system/actBusiness/getForm",addApply:"/system/actBusiness/add",editForm:"/system/actBusiness/editForm"},loading:!1,formModel:{},formRules:{name:[{required:!0,message:"请输入请假事由"}]},formData:{}}},watch:{processData:{handler:function(){this.resetFields(),this.isNew||this.init()},immediate:!0}},methods:{init:function(){var e=this,t=this.processData;Object(l["a"])({url:this.url.getForm,method:"get",params:{tableId:t.tableId,tableName:t.tableName}}).then((function(a){var s=a.result;s.tableName=t.tableName,e.formData=s,e.formModel={name:s.name}}))},handleSubmit:function(){var e=this;this.$refs.formRef.validate((function(t){if(t){e.loading=!0;var a=Object.assign(e.formData||{},e.formModel);a.procDefId=e.processData.id,a.procDeTitle=e.processData.name,a.filedNames=Object.keys(e.formModel).join(","),a.tableName||(a.tableName=e.processData.businessTable);var s=e.url.addApply;e.isNew||(s=e.url.editForm),Object(l["a"])({url:s,method:"post",params:a}).then((function(t){e.loading=!1,e.$modal.msgSuccess("保存成功"),e.$emit("afterSubmit",a),e.$nextTick((function(){e.resetFields()}))})).catch((function(){e.loading=!1}))}}))},resetFields:function(){this.$refs.formRef&&this.$refs.formRef.resetFields()},close:function(){this.resetFields(),this.$emit("close")},passTask:function(){this.$emit("passTask")},backTask:function(){this.$emit("backTask")}}},n=o,r=(a("f4fb"),a("2877")),d=Object(r["a"])(n,s,i,!1,null,"2baba18b",null);t["default"]=d.exports},f4fb:function(e,t,a){"use strict";a("193f")}}]);